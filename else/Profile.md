# Profile





## Skill

Java

- 熟悉Java并发编程，有优化项目并发代码性能的经验，阅读过部分Java并发包源码，如ThreadLocal，AQS，ReentrantLock，线程池，AtomicInteger，能将其处理并发的思想如线程私有数据避免并发，Worker-Thread模式进行任务分工，CAS在并发场景下进行无锁操作应用到项目中

- 熟悉JVM内存分布、垃圾回收机制、类加载机制

- 熟悉Java web框架如SpringMVC Spring Mybatis的应用, 了解Spring IOC AOP等概念

- 阅读过高性能内存并发队列distruptor源码，了解其原理与设计思想，如利用CPU缓存加快内存数据读取，避免缓存行伪共享，无锁算法消费队列数据，并能在项目中应用其设计思想如利用CAS实现并发无锁批量消费数据

- 阅读过部分Tomcat源码，并能将其部分设计如组合模式、观察者模式、对象池应用于项目的优化中

- 熟悉关系型数据库MySQL的应用，了解数据库执行SQL查询语句的流程，MVCC原理，数据库索引原理

- 熟悉列式存储数据库ClickHouse的应用及其核心存储引擎MergeTree及SummingMergeTree原理，解决过资源有限的情况下，单机将亿级数据入库到Clickhouse的问题


- 重视数据结构与算法的学习和应用，有每天刷算法题的习惯，LeetCode刷题400+，熟悉常见的数据结构如数组、链表、栈、队列、二叉树、哈希表、布隆过滤器、跳表

  熟悉经典排序算法如：插入排序、冒泡排序、归并排序、快速排序、堆排序、计数排序、桶排序，熟悉二分、递归、分治、回溯、动态规划、广度优先搜索、深度优先搜索、LRU等算法思想

- 熟悉面向对象设计与设计原则如单一职责、开闭原则、里式替换、接口隔离、DRY等

- 熟悉并能运用常见的设计模式如单例模式、工厂模式、建造者模式、策略模式、观察者模式、模板模式、组合模式

- 学习过操作系统、计算机网络等计算机基础知识

- 熟练使用IDEA、git、svn、maven等开发工具，熟悉Linux基本操作

- 六级成绩576，其中阅读部分满分，有良好的英文文档阅读能力





## Project

数据库审计与防火墙

项目简介：

  通过C++实现的网络报文解析模块对访问数据库的SQL请求进行协议解析后，根据用户下发的相关审计或访问控制规则进行日志记录、报警或者拦截操作，最后由Java实现的数据处理模块将数据入库

将需要存储的SQL访问日志进行序列化并压缩，由Java实现的数据处理模块将压缩文件解压并反序列化，最后将原始日志信息和预处理数据信息存储于ClickHouse数据库中，以便用户进行实时查询和生成统计报表，将预统计数据放入MySQL中以供主页展示SQL趋势

项目中用到的技术：

Spring、SpringMVC、Mybatis、MySQL、ClickHouse、Pika、MessagePack

个人职责：

- 项目日常开发与维护、线上问题定位与处理
- 数据处理模块的性能优化与项目重构

解决的项目难题：

对亿级SQL日志解析并入库时CPU和内存占满，且解析和入库性能远低于正常水平

问题描述：

​	升级客户项目时需要将原有数据导入到新的存储组件ClickHouse中（旧版本存储为Lucene），现场环境待处理的数据数量约为11亿SQL，大小400G，机器配置为4核16G，原来的数据处理模块在运行了一段时间后，机器CPU和内存使用率占满，解析性能约为0.05M/s，入库性能为2000SQL/s，优化后解析性能达到4M/s，入库性能达到20000SQL/s，且CPU与内存使用情况稳定

解决方案：

- Java语言层面优化：基本类型代替包装类对象实现计数自增操作，StringBuilder替换String实现字符串拼接，取消单线程处理内的线程同步操作，使用MurmurHash算法增强预处理对象哈希值的散列性，简单字符替换代替正则实现特殊字符转义，使用JProfiler观察代码运行，减少不避免要的资源开启

- 对象复用：用对象池管理预处理生成对象，进行对象复用，避免对象的频繁生成和销毁，减轻GC压力
- 数据入库流程优化：预处理数据落盘前引入写缓冲，数据先放入写缓冲中，等达到设定的数量阈值或时间阈值时，再进行持久化操作，避免了小规模数据的频繁写盘操作，降低了项目的IO次数



数据处理模块的项目重构

问题描述：

​	当前数据处理模块数据解析速度不理想，且各个功能之间代码结构不清晰，耦合性强，只支持单机处理，不支持集群，可伸缩性差；

解决方案：

- 引入序列化协议MessagePack优化SQL日志的序列化与反序列化速度

- 将数据处理模块内部再细分为3个独立的模块：数据接入、数据预处理、数据存储，各个模块之间只通过内存队列交换数据，降低了代码的耦合性，且模块内部通过策略模式和工厂模式，提高了可扩展性，方便之后集成其他的序列化协议、数据接入方式和数据存储组件
- 引入基于磁盘的key-value存储组件Pika替换之前的本地磁盘存储，来存储待处理的SQL日志，方便之后项目的集群化方案的实施



数据资产管理系统

项目简介：

​	对客户内网环境中的数据库、文件服务器等数据资产进行探测发现和管理，对数据库或文件服务器的存储内容进行扫描，对扫描出来的数据进行分类分级管理

项目中用到的技术：

SpringBoot、MySQL、Redis、WebSocket

个人职责：

- 数据源发现模块
- 文件服务器内容扫描
- 数据台账的开发













